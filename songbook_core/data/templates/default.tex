(* set indexes = "titleidx,authidx" *)

(* extends "songs.tex" *)

(* block songbookpreambule *)
   (( super() ))

  \usepackage{chords}

   \title{((title))}
   \author{((author))}
   \subtitle{((subtitle))}
   (* if version!="unknown" *)
      \version{((version))}
   (* endif *)
   \mail{((mail))}
   \web{((web))}
   \picture{((picture))}
   \picturecopyright{((picturecopyright))}
   \footer{((footer))}

   \newindex{titleidx}{((filename))_title}
   \newauthorindex{authidx}{((filename))_auth}

   (* for prefix in titleprefixwords *)
   \titleprefixwords{((prefix))}
   (* endfor*)
   (* for key in titleprefixkeys *)
      (* for word in authwords.key *)
      (* if key=="after" *)
      \authbyword{((word))}
      (* else *)
      \auth((key))word{((word))}
      (* endif *)
      (* endfor *)
   (* endfor*)
(* endblock *)

(* block title *)
\maketitle
(* endblock *)

(* block index *)
   (* if mainlang==english *)
     \showindex{Songs Index}{titleidx}
     \showindex{Authors Index}{authidx}
   (* else *)
     \showindex{Index des chansons}{titleidx}
     \showindex{Index des auteurs}{authidx}
   (* endif *)
   (* if mainlang==french *)
      \notenamesin{A}{B}{C}{D}{E}{F}{G}
      \notenamesout{La}{Si}{Do}{RÃ©}{Mi}{Fa}{Sol}
   (* endif *)
(* endblock *)

(* block chords *)
   % list of chords
   \ifchorded
   \phantomsection
   (* if mainlang==english *)
     \addcontentsline{toc}{section}{Chords list}
   (* else *)
     \addcontentsline{toc}{section}{Liste des accords}
   (* endif *)
   \chords
   \fi
(* endblock *)

